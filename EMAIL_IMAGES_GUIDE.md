# Руководство по работе с изображениями в email

## Проблема
При отправке статей через Gmail, изображения могут некорректно отображаться в email-клиентах получателей по следующим причинам:

1. **Блокировка внешних изображений** - большинство email-клиентов блокируют внешние изображения по умолчанию
2. **CORS ограничения** - браузеры блокируют доступ к изображениям с других доменов
3. **Размер изображений** - слишком большие изображения могут увеличить размер письма

## Решения, реализованные в расширении

### 1. Автоматическая конвертация в Base64
- Изображения автоматически конвертируются в формат Base64 и встраиваются в письмо
- Размер изображений ограничивается (600x400px, <500KB)
- Используется JPEG сжатие для уменьшения размера

### 2. Email-безопасные атрибуты
- Добавляются стили для корректного отображения в email
- Устанавливается `max-width: 100%` для адаптивности
- Добавляется альтернативный текст (alt) если его нет

### 3. Резервные варианты
- Если конвертация в Base64 невозможна, создается ссылка на оригинальное изображение
- Добавляются информативные плейсхолдеры с ссылками на изображения
- Обработка фоновых CSS изображений

### 4. Улучшенный HTML для email
- Используются inline стили для лучшей совместимости
- Добавляется DOCTYPE и meta теги
- Оптимизированная структура для email-клиентов

## Рекомендации для пользователей

### Для лучшего результата:
1. **Используйте изображения среднего размера** - слишком большие изображения могут не конвертироваться
2. **Проверяйте письмо перед отправкой** - убедитесь, что все изображения отображаются корректно
3. **Информируйте получателей** - объясните им, что нужно разрешить показ изображений в email-клиенте

### Если изображения не отображаются у получателя:
1. **Gmail** - нажать "Показать изображения" в письме
2. **Outlook** - нажать "Показать заблокированные изображения"
3. **Apple Mail** - обычно показывает изображения автоматически
4. **Другие клиенты** - искать настройки "Показать внешние изображения"

## Альтернативные решения

### Если проблемы продолжаются:
1. **Загрузите изображения в облако** (Google Drive, Dropbox) и вставьте ссылки
2. **Используйте специальные email-сервисы** для рассылок с изображениями
3. **Отправляйте статьи как PDF** вместо HTML email

## Технические детали

### Поддерживаемые форматы:
- JPG/JPEG (рекомендуется)
- PNG (конвертируется в JPEG)
- WebP (конвертируется в JPEG)
- SVG (обрабатывается как ссылка)

### Ограничения:
- Максимальный размер для Base64: 500KB
- Максимальные dimensions: 600x400px
- Timeout загрузки: 8 секунд

### Отладка:
- Откройте Developer Tools (F12)
- Смотрите Console для сообщений с префиксом "UAS:"
- Проверяйте статус обработки каждого изображения
